# HG changeset patch
# Parent 0b4f6948f56cce71f0f83e98d19cb8de551ff468
# User Joe Walker <jwalker@mozilla.com>
Bug 683506 - GCLI needs an 'inspect' command

diff --git a/browser/devtools/webconsole/GcliCommands.jsm b/browser/devtools/webconsole/GcliCommands.jsm
--- a/browser/devtools/webconsole/GcliCommands.jsm
+++ b/browser/devtools/webconsole/GcliCommands.jsm
@@ -117,3 +117,25 @@ gcli.addCommand({
   }
 });
 
+
+/**
+ * 'inspect' command
+ */
+gcli.addCommand({
+  name: "inspect",
+  description: gcli.lookup("inspectDesc"),
+  manual: gcli.lookup("inspectManual"),
+  params: [
+    {
+      name: "node",
+      type: "node",
+      description: gcli.lookup("inspectNodeDesc"),
+      manual: gcli.lookup("inspectNodeManual")
+    }
+  ],
+  exec: function Command_inspect(args, context) {
+    let hud = HUDService.getHudReferenceById(context.environment.hudId);
+    let InspectorUI = hud.gcliterm.document.defaultView.InspectorUI;
+    InspectorUI.openInspectorUI(args.node);
+  }
+});
diff --git a/browser/locales/en-US/chrome/browser/devtools/gclicommands.properties b/browser/locales/en-US/chrome/browser/devtools/gclicommands.properties
--- a/browser/locales/en-US/chrome/browser/devtools/gclicommands.properties
+++ b/browser/locales/en-US/chrome/browser/devtools/gclicommands.properties
@@ -35,3 +35,25 @@ consoleManual=Filter, clear and close th
 # LOCALIZATION NOTE (consoleclearDesc) A very short string used to describe the
 # function of the 'console clear' command.
 consoleclearDesc=Clear the console
+
+# LOCALIZATION NOTE (inspectDesc) A very short description of the 'inspect'
+# command. See inspectManual for a fuller description of what it does. This
+# string is designed to be shown in a menu alongside the command name, which
+# is why it should be as short as possible.
+inspectDesc=Inspect a node
+
+# LOCALIZATION NOTE (inspectManual) A fuller description of the 'inspect'
+# command, displayed when the user asks for help on what it does.
+inspectManual=Investigate the dimensions and properties of an element using \
+a CSS selector to open the DOM highlighter
+
+# LOCALIZATION NOTE (inspectNodeDesc) A very short string to describe the
+# 'node' parameter to the 'inspect' command, which is displayed in a dialog
+# when the user is using this command.
+inspectNodeDesc=CSS selector
+
+# LOCALIZATION NOTE (inspectNodeManual) A fuller description of the 'node'
+# parameter to the 'inspect' command, displayed when the user asks for help
+# on what it does.
+inspectNodeManual=A CSS selector for use with Document.querySelector which \
+identifies a single element
